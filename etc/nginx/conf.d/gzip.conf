# gzip compression for proxied HTTP responses.
# WebSocket traffic (/ws) is never affected â€” proxy_buffering off disables buffering there.
# .NET's HttpClient decompresses IBKR responses before forwarding, so nginx always
# receives plain JSON and can compress without risk of double-encoding.
gzip on;
gzip_min_length 1024;        # Don't compress responses smaller than 1 KB
gzip_proxied    any;         # Compress all proxied responses
gzip_comp_level 6;           # Balanced CPU vs compression ratio
gzip_types
    application/json
    application/javascript
    text/html
    text/plain
    text/css;
gzip_vary on;                # Add Vary: Accept-Encoding so caches serve correct variant
